/* eslint-disable */
var e=Array,t=e.prototype;function n(){return t.concat.apply([],arguments)}function r(e){return e[e.length-1]}var i=RegExp,s=Object,a=s.keys,u=s.create,c=e.isArray,o=Math.pow,f=s.defineProperty,p=s.setPrototypeOf;function l(e,t){return l=p?p.bind():function(e,t){return e.__proto__=t,e},l(e,t)}function h(){h=function(e,t){return new n(e,void 0,t)};var e=i.prototype,t=new WeakMap;function n(e,r,s){var a=new i(e,r);return t.set(a,s||t.get(e)),l(a,n.prototype)}function r(e,n){var r=t.get(n);return a(r).reduce((function(t,n){var i=r[n];if("number"==typeof i)t[n]=e[i];else{for(var s=0;void 0===e[i[s]]&&s+1<i.length;)s++;t[n]=e[i[s]]}return t}),u(null))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=u(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),f(e,"prototype",{writable:!1}),t&&l(e,t)}(n,i),n.prototype.exec=function(t){var n=e.exec.call(this,t);if(n){n.groups=r(n,this);var i=n.indices;i&&(i.groups=r(i,this))}return n},n.prototype[Symbol.replace]=function(n,i){if("string"==typeof i){var s=t.get(this);return e[Symbol.replace].call(this,n,i.replace(/\$<([^>]+)>/g,(function(e,t){var n=s[t];return"$"+(c(n)?n.join("$"):n)})))}if("function"==typeof i){var a=this;return e[Symbol.replace].call(this,n,(function(){var e=arguments;return"object"!=typeof e[e.length-1]&&(e=[].slice.call(e)).push(r(e,a)),i.apply(this,e)}))}return e[Symbol.replace].call(this,n,i)},h.apply(this,arguments)}var g=h(/^(\x2D?)((?:NaN)?)((?:Infinity)?)(\d*)[.,]?(\d*)e?([-+]?\d*)n?$/i,{neg:1,nan:2,inf:3,int:4,frc:5,exp:6}),y=/^0+/;function v(e){var t=(+e+"").match(g).groups,n=t.int,r=t.frc;return t.nan=!!t.nan,t.neg="-"===t.neg,t.inf=!!t.inf,t.int=(n+r).replace(y,""),t.exp=+t.exp-r.length,delete t.frc,t}function x(e){return e.nan?NaN:e.inf?e.neg?-1/0:1/0:e.neg?-((e.int||"0")+"e"+e.exp):+((e.int||"0")+"e"+e.exp)}function d(e,t){if(0===t)return 1;if(t!=t||e!=e)return NaN;if(t===1/0)return t;if(0===e||t===-1/0)return 0;if(e===1/0||e===-1/0)return e;t<0&&(e=b(1,e),t=-t);for(var n=1,r=0;++r<=t;)n=N(n,e);return(t=m(t,1-r))>0&&(n=N(n,o(e,t))),n}function N(e,t){var n=v(e),r=v(t),i=n.exp,s=r.exp,a=(i>s?s-i:i-s)||i;n.exp-=a,r.exp-=a;var u=v(x(n)*x(r));return u.exp+=a+a,x(u)}function b(e,t){var n=v(e),r=v(t),i=n.exp,s=r.exp,a=(i>s?s-i:i-s)||i;return n.exp-=a,r.exp-=a,x(n)/x(r)}function w(e,t){var n=v(e),r=v(t),i=n.exp,s=r.exp,a=(i>s?s-i:i-s)||i;n.exp-=a,r.exp-=a;var u=v(x(n)%x(r));return u.exp+=a,x(u)}function m(e,t){var n=v(e),r=v(t),i=n.exp,s=r.exp,a=(i>s?s-i:i-s)||i;n.exp-=a,r.exp-=a;var u=v(x(n)+x(r));return u.exp+=a,x(u)}function k(e,t){return m(e,-t)}var P=/\?\??|\|\|?|\*\*?|&&?|<<|>>>?|[!=]=?=?|[<>]=?|(?<!\d\.?[eE])[-+]|[,:~^%/()[\]]/g,$=function(){function e(e){this.type="Program",this.is=e}return e.prototype.calc=function(){return this.is?this.is.calc(arguments):NaN},e}(),S=function(){function e(e){this.type="Parenthesis",this.is=e}return e.prototype.calc=function(){return this.is?this.is.calc(arguments):NaN},e}(),j=function(){function e(e,t,n){this.type="Conditional",this.is=n,this.isTrue=t,this.isFalse=e}return e.prototype.calc=function(){var e=this.is,t=(this.isTrue,this.isFalse),n=arguments;return e?e.calc(n):t?t.calc(n):NaN},e}(),A=function(){function e(e){this.type="Constant",this.is=e}return e.prototype.calc=function(){for(var e=this.is,t=arguments,n=t.length;n-- >0;)if(e in t[n]&&"function"!=typeof t[n])return+t[n][e];return+e},e}();function C(e){return e.calc.apply(void 0,this)}var F=function(){function e(e,t){this.type="Function",this.is=e,this.isArgs=t}return e.prototype.calc=function(){for(var e=this.is,t=arguments,n=t.length;n-- >0;)if(e in t[n]&&"function"==typeof t[n][e])return+t[n][e].apply(void 0,this.isArgs.map(C,t));return NaN},e}(),O=function(){function e(e,t,n){this.type="Operator",this.is=e,this.isLeft=n,this.isRight=t}return e.prototype.calc=function(){var e=this.is,t=this.isLeft,n=this.isRight,r=arguments,i=t?t.calc(r):NaN,s=n?n.calc(r):NaN;if(!n)return t&&"%"===e?b(i,100):i;if(!t){if(n){if("-"===e)return-s;if("!"===e)return+!s;if("~"===e)return~s}return s}for(var a=r.length;a-- >0;)if(e in r[a]&&"function"==typeof r[a][e])return+r[a][e](i,s);switch(e){case"**":return d(i,s);case"*":return N(i,s);case"/":return b(i,s);case"%":return w(i,s);case"+":return m(i,s);case"-":return m(i,-s);case"<<":return i<<s;case">>":return i>>s;case">>>":return i>>>s;case"<":return i<s?1:0;case"<=":return i<=s?1:0;case">":return i>s?1:0;case">=":return i>=s?1:0;case"=":case"==":case"===":return i===s?1:0;case"!=":case"!==":return i!==s?1:0;case"&":return i&s;case"^":return i^s;case"|":return i|s;case"&&":return i?s:i;case"||":return i||s;case"??":return i==i?i:s}return NaN},e}(),_={"!":14,"~":14,"**":13,"*":12,"/":12,"%":12,"+":11,"-":11,"<<":10,">>":10,">>>":10,"<":9,"<=":9,">":9,">=":9,"=":8,"==":8,"!=":8,"===":8,"!==":8,"&":7,"^":6,"|":5,"&&":4,"||":3,"??":3,"?":2,":":2,",":1};function E(e,t,i,s,a,u,c){if(u[t]&&u[t].length)for(var o,f=u[t],p=f.length;p-- >0;)if((o=f[p]-i)>-1&&o<e.length)return f.splice(p,1),n(E(e.slice(0,o),t,i,s,a,u,c),E(e.slice(o+1),t,i+o+1,s,a,u,c));if(a[t]&&a[t].length)for(var l,h,g=a[t],y=g.length;y-- >0;)if(l=g[y].f-i,h=g[y].s-i,l>-1&&l<e.length&&h>l)return g.splice(y,1),new j(r(n(E(e.slice(h+1),t,i+h+1,s,a,u,c))),r(n(E(e.slice(l+1,h),t,i+l+1,s,a,u,c))),r(n(E(e.slice(0,l),t,i,s,a,u,c))));if(c[t]&&c[t].length)for(var v,x=c[t],d=x.length;d-- >0;)if((v=x[d]-i)>-1&&v<e.length){if(d>0&&(_[e[v-1]]&&"%"!==e[v-1]||"%"===e[v]&&(!e[v+1]||_[e[v+1]])))continue;return x.splice(d,1),new O(e[v],r(n(E(e.slice(v+1),t,i+v+1,s,a,u,c))),r(n(E(e.slice(0,v),t,i,s,a,u,c))))}if(s[t]&&s[t].length)for(var N,b,w=s[t],m=w.length;m-- >0;)if(N=w[m].f-i,b=w[m].s-i,N>-1&&N<e.length&&b>N)return w.splice(m,1),"("===e[N]?new S(r(n(E(e.slice(N+1,b),t+1,i+N+1,s,a,u,c)))):new F(e[N],n(E(e.slice(N+2,b),t+1,i+N+2,s,a,u,c)));var k=e.join("");return k?new A(k):[]}function R(e,t,n,r){e[t]||(e[t]=[]),e[t][n]||(e[t][n]=[]),e[t][n][n===_["**"]?"unshift":"push"](r.length)}function T(e,t,n){R(e,t,_["*"],n),n.push("*")}function I(e){e="("+e+")",P.lastIndex=0;for(var i,s,a,u,c=[],o=0,f="",p=0,l=0,h={},g={},y={},v={},x={},d={},N={};u=P.exec(e);)switch(i=u[0]){case"[":l++;break;case"]":l--;break;default:if(0!==l)break;switch(u.index>o&&(s=e.slice(o,u.index).trim())&&(")"===f&&T(N,p,c),c.push(f=s)),i){case"(":g[p]||(g[p]=[]),g[p].push({f:c.length,s:-1}),f&&(/^[a-z][$\w]*$/.test(f)?(a=g[p]&&r(g[p]))&&a.f--:"("===f||_[f]||(T(N,p,c),(a=g[p]&&r(g[p]))&&a.f++)),p++;break;case")":(a=g[--p]&&r(g[p]))&&(a.s=c.length,(h[p]||(h[p]=[])).push(g[p].pop()));break;default:switch(")"!==f||_[i]||(T(N,p,c),f="*"),i){case",":x[p]||(x[p]=[]),x[p].push(c.length);break;case"?":v[p]||(v[p]=[]),v[p].push({f:c.length,s:-1});break;case":":(a=v[p]&&r(v[p]))&&(a.s=c.length,(y[p]||(y[p]=[])).push(v[p].pop()));break;default:R(N,p,_[i],c)}}c.push(f=i),o=u.index+i.length}for(var b in N){d[b]=[];for(var w=N[b],m=w.length;m-- >0;)w[m]&&t.push.apply(d[b],w[m])}return new $(r(n(E(c.slice(1,-1),1,1,h,y,x,d))))}export{j as NodeConditional,A as NodeConstant,F as NodeFunction,O as NodeOperator,S as NodeParenthesis,$ as NodeProgram,m as add,I as create,I as default,b as div,d as exp,N as mul,v as num2raw,x as raw2num,w as rem,k as sub};
